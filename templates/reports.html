{% extends 'base.html' %}
{% block title %}Reports{% endblock %}
{% block content %}

<div class="bg-[#1f1f2e] rounded-2xl p-6 shadow-lg max-h-[95vh] overflow-y-auto text-white hide-scrollbar">
  <h1 class="text-2xl font-semibold mb-6">Scan Reports</h1>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div class="bg-[#2a2a3b] p-4 rounded-xl shadow text-center">
      <h2 class="text-lg font-semibold text-gray-300">Total Detections</h2>
      <p class="text-3xl font-bold text-red-400 mt-2">36</p>
    </div>
    <div class="bg-[#2a2a3b] p-4 rounded-xl shadow text-center">
      <h2 class="text-lg font-semibold text-gray-300">Last Scan</h2>
      <p class="text-xl font-medium text-purple-300 mt-2">2025-06-19 13:05</p>
    </div>
    <div class="bg-[#2a2a3b] p-4 rounded-xl shadow text-center">
      <h2 class="text-lg font-semibold text-gray-300">Critical Threats</h2>
      <p class="text-3xl font-bold text-red-500 mt-2">5</p>
    </div>
  </div>

  <!-- Scan History Table -->
  <div class="overflow-x-auto rounded-xl shadow mb-6">
    <table class="min-w-full bg-[#2a2a3b] text-left text-sm text-gray-300">
      <thead class="bg-[#1e1e2f] text-gray-400 uppercase text-xs">
        <tr>
          <th class="px-4 py-3">Scan ID</th>
          <th class="px-4 py-3">Date</th>
          <th class="px-4 py-3">Threats Found</th>
          <th class="px-4 py-3">Status</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-[#1e1e2f]">
        <tr class="hover:bg-[#2f2f44] transition">
          <td class="px-4 py-3">#1052</td>
          <td class="px-4 py-3">2025-06-19</td>
          <td class="px-4 py-3 text-red-400 font-semibold">7</td>
          <td class="px-4 py-3 text-yellow-300">Completed</td>
        </tr>
        <tr class="hover:bg-[#2f2f44] transition">
          <td class="px-4 py-3">#1051</td>
          <td class="px-4 py-3">2025-06-18</td>
          <td class="px-4 py-3 text-orange-300 font-semibold">3</td>
          <td class="px-4 py-3 text-green-300">Completed</td>
        </tr>
        <tr class="hover:bg-[#2f2f44] transition">
          <td class="px-4 py-3">#1050</td>
          <td class="px-4 py-3">2025-06-17</td>
          <td class="px-4 py-3 text-yellow-300 font-semibold">2</td>
          <td class="px-4 py-3 text-green-300">Completed</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Chart Area -->
  <div class="bg-[#2a2a3b] p-4 rounded-xl shadow">
    <h2 class="text-lg font-semibold text-gray-300 mb-4">Threat Detection Trends</h2>
    <canvas id="threatChart" class="w-full h-40"></canvas>
  </div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Chart Configuration -->
<script>
  const ctx = document.getElementById('threatChart').getContext('2d');
  const threatChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['June 14', 'June 15', 'June 16', 'June 17', 'June 18', 'June 19'],
      datasets: [{
        label: 'Threats Detected',
        data: [1, 3, 0, 2, 3, 7],
        fill: false,
        borderColor: 'rgb(255, 99, 132)',
        backgroundColor: 'rgb(255, 99, 132)',
        tension: 0.3
      }]
    },
    options: {
      responsive: true,
      scales: {
        x: {
          ticks: { color: '#aaa' },
          grid: { color: '#333' }
        },
        y: {
          beginAtZero: true,
          ticks: { color: '#aaa' },
          grid: { color: '#333' }
        }
      },
      plugins: {
        legend: {
          labels: { color: '#fff' }
        }
      }
    }
  });
</script>

<!-- Hide Scrollbar Utility -->
<style>
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .hide-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
</style>

{% endblock %}
